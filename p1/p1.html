<!DOCTYPE HTML>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>CS 559 P1</title>
    <style type="text/css">
    canvas {
        border: 1px solid #d3d3d3;
    }
    </style>
</head>


<body>
    <canvas id="p1canvas" width="500" height="500"></canvas>
    <script type="text/javascript">

        var nodes = [];
        var c = document.getElementById("p1canvas");
        var ctx = c.getContext("2d");
        var prev = 0;

        function init() {
            for (var i = 0; i < 10; i++) {
                var x = Math.random() * 300;
                var y = Math.random() * 300;
                var z = Math.random();
                nodes.push({
                    "x": x,
                        "y": y,
                    "z": z,
                        "vx": Math.random() - 0.5,
                        "vy": Math.random() - 0.5,
                    "vz": Math.random() - 0.5,
                });
            }
        }



        function drawPoint(x, y, z, radius) {
            ctx.beginPath();
            ctx.lineWidth = radius;
            ctx.strokeStyle="hsl(0, 0%, " + z * 65 + "%)";
            ctx.arc(x, y, radius / 2.0, 0, Math.PI * 2, true);
            ctx.stroke();
        }

        function drawLine(x1, y1, z1, x2, y2, z2) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.lineWidth = 1;
            ctx.stroke();
        }

        function loop(timestamp) {
            var delta = prev == 0 ? 0 : (timestamp - prev);
            prev = timestamp;

            ctx.clearRect(0, 0, c.width, c.height);
            for (var i = 0; i < nodes.length; i++) {
                var node = nodes[i];
                drawPoint(node.x, node.y, node.z, 5);
                for (var j = i; j < nodes.length; j++) {
                    if (i != j) {
                        var rnode = nodes[j];
                        drawLine(node.x, node.y, node.z, rnode.x, rnode.y, rnode.z);
                    }
                }
                var xmove = node.vx * delta / 5;
                var ymove = node.vy * delta / 5;
                if (node.x + xmove < 0 || node.x + xmove > c.width) {
                    node.vx = -1 * node.vx;
                    xmove = 0;
                }
                if (node.y + ymove < 0 || node.y + ymove > c.height) {
                    node.vy = -1 * node.vy;
                    ymove = 0;
                }
                node.x += xmove;
                node.y += ymove;

            }

            window.requestAnimationFrame(loop);
        }
        init();
        loop(0);
    </script>
</body>
</html>